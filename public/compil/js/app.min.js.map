{"version":3,"sources":["public/js/app.js","public/js/components/common/common.md.js","public/js/components/home/home.md.js","public/js/components/login/login.md.js","public/js/components/portefolio/portefolio.md.js","public/js/config/config.md.js","public/js/services/services.md.js","public/js/components/common/navBar.js","public/js/components/home/home.js","public/js/components/login/login.js","public/js/components/portefolio/portefolioAdd.js","public/js/components/portefolio/portefolioArticle.js","public/js/components/portefolio/portefolioList.js","public/js/config/http.js","public/js/config/routes.js","public/js/services/commentService.js","public/js/services/portefolioService.js","public/js/services/userService.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClBA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"public/compil/js/app.min.js","sourcesContent":["'use strict';\n\n(function (app) {\n  'use strict';\n})(require('angular').module('app', [require('angular-ui-router'), require('angular-cookies'), require('angular-messages'), require('angular-materialize'), 'app.home', 'app.common', 'app.portefolio', 'app.login', 'app.services', 'app.config']));\n","'use strict';\n\n(function (app) {})(require('angular').module('app.common', []));\n","'use strict';\n\n(function (app) {\n    'use strict';\n\n    app.config(['$stateProvider', function ($stateProvider) {\n        $stateProvider.state('app.home', {\n            url: '/',\n            template: '<home></home>'\n        });\n    }]);\n})(require('angular').module('app.home', []));\n","'use strict';\n\n(function (app) {\n    'use strict';\n\n    app.config(['$stateProvider', function ($stateProvider) {\n        $stateProvider.state('app.login', {\n            url: '/login',\n            template: '<login></login>'\n        });\n    }]);\n})(require('angular').module('app.login', []));\n","'use strict';\n\n(function (app) {\n    'use strict';\n\n    app.config(['$stateProvider', function ($stateProvider) {\n        $stateProvider.state('app.portefolioList', {\n            url: '/portefolio',\n            template: '<portefolio-list></portefolio-list>'\n        }).state('app.portefolioAdd', {\n            url: '/portefolio/new',\n            template: '<portefolio-add></portefolio-add>'\n        }).state('app.portefolioArticle', {\n            url: '/portefolio/:id',\n            template: '<portefolio-article></portefolio-article>'\n        });\n    }]);\n})(require('angular').module('app.portefolio', []));\n","'use strict';\n\n(function (app) {})(require('angular').module('app.config', []));\n","'use strict';\n\n(function (app) {})(require('angular').module('app.services', ['ngCookies']));\n","'use strict';\n\n(function (app) {\n    'use strict';\n\n    app.component('navBar', {\n        templateUrl: 'js/components/common/navBar.html',\n        controller: ['$state', 'usersService', function ($state, usersService) {\n\n            angular.extend(this, {\n                $onInit: function $onInit() {\n                    this.getUser();\n                },\n                getUser: function getUser() {\n                    var _this = this;\n\n                    usersService.getCurrent().then(function (user) {\n                        _this.user = user;\n                    });\n                },\n                disconnect: function disconnect() {\n                    var _this2 = this;\n\n                    usersService.disconnect().then(function (user) {\n                        _this2.user = null;\n                        $state.reload();\n                    });\n                }\n            });\n        }]\n    });\n})(require('angular').module('app.common'));\n","'use strict';\n\n(function (app) {\n    'use strict';\n\n    app.component('home', {\n        templateUrl: 'js/components/home/home.html'\n    });\n})(require('angular').module('app.home'));\n","'use strict';\n\n(function (app) {\n    'use strict';\n\n    app.component(\"login\", {\n        templateUrl: 'js/components/login/login.html',\n        controller: ['usersService', '$state', function (usersService, $state) {\n            angular.extend(this, {\n                connect: function connect(user) {\n                    usersService.connect(user).then(function (user) {\n                        $state.go('app.home');\n                    });\n                }\n            });\n        }]\n    });\n})(require('angular').module('app.login'));\n","'use strict';\n\n(function (app) {\n    'use strict';\n\n    app.component(\"portefolioAdd\", {\n        templateUrl: 'js/components/portefolio/portefolioAdd.html',\n        controller: ['portefoliosService', '$state', 'usersService', function (portefoliosService, $state, usersService) {\n            angular.extend(this, {\n                $onInit: function $onInit() {\n                    this.getUser();\n                },\n                getUser: function getUser() {\n                    var _this = this;\n\n                    usersService.getCurrent().then(function (user) {\n                        _this.user = user;\n                    });\n                },\n                add: function add(website) {\n                    var _this2 = this;\n\n                    portefoliosService.add(website).then(function (res) {\n                        _this2.website = {};\n                        $state.go('app.portefolioList');\n                    });\n                },\n                cancel: function cancel() {\n                    $state.go('app.portefolioList');\n                },\n                submitForm: function submitForm(form, website) {\n                    if (form.$valid) {\n                        this.add(website);\n                    }\n                }\n            });\n        }]\n    });\n})(require('angular').module('app.portefolio'));\n","'use strict';\n\n(function (app) {\n    'use strict';\n\n    app.component(\"portefolioArticle\", {\n        templateUrl: 'js/components/portefolio/portefolioArticle.html',\n        controller: ['portefoliosService', 'commentsService', '$state', 'usersService', function (portefoliosService, commentsService, $state, usersService) {\n            angular.extend(this, {\n                $onInit: function $onInit() {\n                    this.websiteID = $state.params.id;\n                    this.getUser();\n                    this.getComment();\n                    this.get(this.websiteID);\n                    this.modeEdit = false;\n                },\n                getUser: function getUser() {\n                    var _this = this;\n\n                    usersService.getCurrent().then(function (user) {\n                        _this.user = user;\n                    });\n                },\n                get: function get(selectedWebsiteId) {\n                    var _this2 = this;\n\n                    portefoliosService.getById(selectedWebsiteId).then(function (res) {\n                        _this2.website = res.data;\n                    });\n                },\n                getComment: function getComment() {\n                    var _this3 = this;\n\n                    commentsService.get().then(function (res) {\n                        _this3.comments = [];\n                        res.data.forEach(function (el) {\n                            el.websiteId === _this3.websiteID ? _this3.comments.push(el) : false;\n                        });\n                    });\n                },\n                close: function close() {\n                    $state.go('app.portefolioList');\n                },\n                editWebsite: function editWebsite() {\n                    this.modeEdit = true;\n                },\n                cancel: function cancel() {\n                    this.modeEdit = false;\n                },\n                update: function update(website) {\n                    var _this4 = this;\n\n                    portefoliosService.update(website).then(function (res) {\n                        _this4.cancel();\n                    });\n                },\n                delete: function _delete(website) {\n                    var _this5 = this;\n\n                    portefoliosService.delete(website).then(function (res) {\n                        _this5.close();\n                    });\n                },\n                submitForm: function submitForm(form, website) {\n                    if (form.$valid) {\n                        this.update(website);\n                    }\n                },\n                submitCommentForm: function submitCommentForm(form, comment) {\n                    if (form.$valid) {\n                        this.addComment(comment);\n                    }\n                },\n                addComment: function addComment(comment) {\n                    var _this6 = this;\n\n                    comment.websiteId = this.websiteID;\n                    commentsService.add(comment).then(function (res) {\n                        _this6.comment = {};\n                        _this6.getComment();\n                    });\n                },\n                cancelComment: function cancelComment() {\n                    this.comment = {};\n                },\n                deleteComment: function deleteComment(comment) {\n                    var _this7 = this;\n\n                    commentsService.delete(comment).then(function (res) {\n                        _this7.getComment();\n                    });\n                }\n            });\n        }]\n    });\n})(require('angular').module('app.portefolio'));\n","\"use strict\";\n\n(function (app) {\n    'use strict';\n\n    app.component(\"portefolioList\", {\n        bindings: {\n            limit: \"=\"\n        },\n        templateUrl: 'js/components/portefolio/portefolioList.html',\n        controller: ['portefoliosService', '$state', 'usersService', function (portefoliosService, $state, usersService) {\n            angular.extend(this, {\n                $onInit: function $onInit() {\n                    this.getUser();\n                    this.getAll();\n                },\n                getUser: function getUser() {\n                    var _this = this;\n\n                    usersService.getCurrent().then(function (user) {\n                        _this.user = user;\n                    });\n                },\n                getAll: function getAll() {\n                    var _this2 = this;\n\n                    portefoliosService.get().then(function (res) {\n                        _this2.portefolios = res.data;\n                    });\n                },\n                goCreateWebsite: function goCreateWebsite() {\n                    $state.go('app.portefolioAdd');\n                }\n            });\n        }]\n    });\n})(require('angular').module('app.portefolio'));\n","'use strict';\n\n(function (app) {\n    'use strict';\n\n    app.config(['$httpProvider', function ($httpProvider) {\n        $httpProvider.interceptors.push(['$q', '$injector', '$cookies', function ($q, $injector, $cookies) {\n            return {\n                request: function request(config) {\n                    config.headers = config.headers || {};\n                    if ($cookies.get('token')) config.headers.authorization = $cookies.get('token');\n                    return config;\n                },\n                responseError: function responseError(response) {\n                    var state = $injector.get('$state');\n                    if (response.status === 401 || response.status === 403) state.go('app.home');\n                    return $q.reject(response);\n                }\n            };\n        }]);\n    }]);\n})(require('angular').module('app.config'));\n","'use strict';\n\n(function (app) {\n    'use strict';\n\n    app.config(['$stateProvider', '$urlRouterProvider', '$locationProvider', function ($stateProvider, $urlRouterProvider, $locationProvider) {\n        $locationProvider.hashPrefix('!');\n        $urlRouterProvider.otherwise('/');\n        $stateProvider.state('app', {\n            url: '',\n            abstract: true,\n            template: '<ui-view></ui-view>'\n        });\n    }]);\n})(require('angular').module('app.config'));\n","'use strict';\n\n(function (app) {\n\n    'use strict';\n\n    app.service('commentsService', function ($http) {\n        return {\n            get: function get() {\n                return $http.get('/api/comments');\n            },\n            add: function add(comment) {\n                return $http.post('/api/comments', comment);\n            },\n            delete: function _delete(comment) {\n                return $http.delete('/api/comments/' + comment._id);\n            }\n        };\n    });\n})(require('angular').module('app.services'));\n","'use strict';\n\n(function (app) {\n\n    'use strict';\n\n    app.service('portefoliosService', function ($http) {\n        return {\n            get: function get() {\n                return $http.get('/api/websites');\n            },\n            getById: function getById(websiteId) {\n                return $http.get('/api/websites/' + websiteId);\n            },\n            add: function add(website) {\n                return $http.post('/api/websites', website);\n            },\n            update: function update(website) {\n                return $http.put('/api/websites/' + website._id, website);\n            },\n            delete: function _delete(website) {\n                return $http.delete('/api/websites/' + website._id);\n            }\n        };\n    });\n})(require('angular').module('app.services'));\n","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n(function (app) {\n    'use strict';\n\n    app.service('usersService', ['$http', '$cookies', '$window', '$q', function () {\n        function UsersService($http, $cookies, $window, $q) {\n            _classCallCheck(this, UsersService);\n\n            this.$http = $http;\n            this.$cookies = $cookies;\n            this.$window = $window;\n            this.$q = $q;\n            this.currentUser = null;\n        }\n\n        _createClass(UsersService, [{\n            key: 'get',\n            value: function get() {\n                return this.$http.get('/api/users');\n            }\n        }, {\n            key: 'connect',\n            value: function connect(data) {\n                var _this = this;\n\n                return new Promise(function (resolve, reject) {\n                    _this.$http.post('/api/auth', data).then(function (res) {\n                        _this.currentUser = res.data.user;\n                        _this.$cookies.put('token', res.data.token);\n                        resolve(res.data.user);\n                    }).catch(function () {\n                        reject();\n                    });\n                });\n            }\n        }, {\n            key: 'disconnect',\n            value: function disconnect() {\n                var _this2 = this;\n\n                return new Promise(function (resolve, reject) {\n                    _this2.$cookies.remove(\"token\");\n                    _this2.currentUser = null;\n                    resolve();\n                });\n            }\n        }, {\n            key: 'getCurrent',\n            value: function getCurrent() {\n                var deferred = this.$q.defer();\n                if (!this.$cookies.get('token')) {\n                    deferred.reject();\n                } else {\n                    if (!this.currentUser) {\n                        var payload = this.$cookies.get('token').split('.')[1];\n                        payload = this.$window.atob(payload);\n                        payload = JSON.parse(payload);\n                        this.currentUser = payload._doc;\n                        if (Math.round(new Date().getTime() / 1000) > payload.exp) return this.disconnect();\n                    }\n                    deferred.resolve(this.currentUser);\n                }\n                return deferred.promise;\n            }\n        }]);\n\n        return UsersService;\n    }()]);\n})(angular.module('app.services'));\n"]}